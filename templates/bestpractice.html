{% extends "base.html" %}

{% block title %}Best practice{% endblock %}

{% block content %}
  <h1>Best practice</h1>
  <p>A database-driven list of best practice examples (blogs, web pages, socials, videos, etc).</p>

  <form method="get" class="search-section">
    <input type="text" name="search" placeholder="Search by title or description..." value="{{ search }}">
    <select name="type">
      <option value="any">Any type</option>
      {% for t in types %}
        <option value="{{ t }}" {% if t == type_filter %}selected{% endif %}>{{ t }}</option>
      {% endfor %}
    </select>
    <button type="submit">Search</button>
  </form>

  <div class="homepage-grid">
    <div class="bestpractice-left">
      <h2>Results</h2>
      {% if results %}
        <ul>
          {% for row in results %}
            <li>
              <a href="{{ url_for('bestpractice', search=search, type=type_filter, id=row.id) }}">{{ row.title }}</a>
            </li>
          {% endfor %}
        </ul>
      {% else %}
        <p>No matching entries found.</p>
      {% endif %}
    </div>

    <div class="bestpractice-right">
      {% if selected %}
        <h2>{{ selected.title }}</h2>
        <p><strong>Type:</strong> {{ selected.type }}</p>
        <p><strong>Description:</strong> {{ selected.description }}</p>
        {% if selected.url %}
          <div style="margin-top: 1em;">
            <iframe src="{{ selected.url }}" width="100%" height="400" style="border: 1px solid #ccc;"></iframe>
            <p><a href="{{ selected.url }}" target="_blank">Open in new tab</a></p>
          </div>
        {% endif %}
      {% endif %}
    </div>
  </div>
{% endblock %}

